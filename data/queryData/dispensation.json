[
  {
    "version": 1,
    "name": "initial_migrations",
    "sections": [
      {
        "title": "",
        "subSections": [
          {
            "title": "",
            "queries": [
              {
                "type": "DEFAULT",
                "query": "create table flyway_schema_history( installed_rank integer not null constraint flyway_schema_history_pk primary key, version varchar(50), description varchar(200) not null, type varchar(20) not null, script varchar(1000) not null, checksum integer, installed_by varchar(100) not null, installed_on timestamp default now() not null, execution_time integer not null, success boolean not null);"
              }
            ]
          },
          {
            "title": "",
            "queries": [
              {
                "type": "DEFAULT",
                "query": "create index flyway_schema_history_s_idx on flyway_schema_history (success);"
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "version": 2,
    "name": "create_tables",
    "sections": [
      {
        "title": "",
        "subSections": [
          {
            "title": "",
            "queries": [
              {
                "type": "DEFAULT",
                "query": "create sequence ds_client_id_seq;"
              },
              {
                "type": "DEFAULT",
                "query": "create table ds_client( id bigserial not null constraint ds_client_pkey primary key, created_date timestamp, name varchar(255), password varchar(255), event_flow_id bigint);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_client_name on ds_client (name);"
              }
            ]
          },
          {
            "title": "",
            "queries": [
              {
                "type": "DEFAULT",
                "query": "create sequence ds_product_id_seq;"
              },
              {
                "type": "DEFAULT",
                "query": "create table ds_product( id bigserial not null constraint ds_product_pkey primary key, composition varchar(255), dosage varchar(255), dosage_form varchar(255) not null, drug_code varchar(255), manufacturer varchar(255), product_name varchar(255) not null, category varchar(255));"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_drugcode on ds_product (drug_code);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_composition_dosage_dosageforn_drugcode_manufacturer_product on ds_product (composition, dosage, dosage_form, drug_code, manufacturer, product_name);"
              }
            ]
          },
          {
            "title": "",
            "queries": [
              {
                "type": "DEFAULT",
                "query": "create sequence ds_product_inventory_id_seq;"
              },
              {
                "type": "DEFAULT",
                "query": "create table ds_product_inventory( id bigserial not null constraint ds_product_inventory_pkey primary key, product_id bigint not null, batch_number varchar(255), expiry_date timestamp);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_productid_batchnumber on ds_product_inventory (product_id, batch_number);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_productid on ds_product_inventory (product_id);"
              }
            ]
          },
          {
            "title": "",
            "queries": [
              {
                "type": "DEFAULT",
                "query": "create sequence ds_product_inventory_log_id_seq;"
              },
              {
                "type": "DEFAULT",
                "query": "create table ds_product_inventory_log( id bigserial not null constraint ds_product_inventory_log_pkey primary key, transaction_type integer not null, transaction_id bigint not null, transaction_quantity bigint not null, comment_type integer, comment varchar(255), date_of_action timestamp not null, p_inventory_id bigint, product_id bigint, transaction_id_type integer, updated_by bigint);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_transactionid_ds_prodinvlog on ds_product_inventory_log (transaction_id);"
              }
            ]
          },
          {
            "title": "",
            "queries": [
              {
                "type": "DEFAULT",
                "query": "create sequence ds_product_inventory_hierarchy_mapping_id_seq;"
              },
              {
                "type": "DEFAULT",
                "query": "create table ds_product_inventory_hierarchy_mapping( id bigserial not null constraint ds_product_inventory__hierarchy_mapping_pkey primary key, inventory_id bigint not null, hierarchy_mapping_id bigint not null, client_id bigint not null, available_quantity bigint, last_updated_by bigint, last_updated_at timestamp);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_inventoryid_hierarchymappingid on ds_product_inventory_hierarchy_mapping (inventory_id, hierarchy_mapping_id);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_inventoryid_hierarchymappingid_clientid on ds_product_inventory_hierarchy_mapping (inventory_id, hierarchy_mapping_id, client_id);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_hierarchy_mapping_id on ds_product_inventory_hierarchy_mapping (hierarchy_mapping_id);"
              }
            ]
          },
          {
            "title": "",
            "queries": [
              {
                "type": "DEFAULT",
                "query": "create sequence ds_dispensation_id_seq;"
              },
              {
                "type": "DEFAULT",
                "query": "create table ds_dispensation( id bigserial not null constraint ds_dispensation_pkey primary key, added_by bigint not null, added_date timestamp not null, client_id bigint, date_of_prescription timestamp, deleted boolean, drug_dispensed_for_days bigint, entity_id bigint not null, issue_date timestamp, issuing_facility bigint, notes varchar(1000), phase varchar(255), refill_date timestamp, weight bigint, weight_band varchar(255), dosing_start_date timestamp, status integer default 0);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_entityid_clientid_deleted on ds_dispensation (entity_id, client_id, deleted);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_id_clientid_deleted on ds_dispensation (id, client_id, deleted);"
              }
            ]
          },
          {
            "title": "",
            "queries": [
              {
                "type": "DEFAULT",
                "query": "create sequence ds_product_dispensation_mapping_id_seq;"
              },
              {
                "type": "DEFAULT",
                "query": "create table ds_product_dispensation_mapping( id bigserial not null constraint ds_product_dispensation_mapping_pkey primary key, dispensation_id bigint not null, dosing_schedule varchar(255), number_of_units_issued bigint, product_config_id bigint not null, product_id bigint not null, refill_date timestamp);"
              },
              {
                "type": "DEFAULT",
                "query": "create index idx_dispensationid on ds_product_dispensation_mapping (dispensation_id);"
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "version": 3,
    "name": "add_clients",
    "sections": [
      {
        "title": "",
        "subSections": [
          {
            "title": "",
            "queries": [
              {
                "type": "INSERT",
                "table": "ds_client",
                "keyValues": {
                  "id": 63,
                  "created_date": "NOW()",
                  "name": "'Hub'",
                  "password": "'$2a$10$ECN79N5hpY1rc.aUYlaXdOY.D8K2M6BYK0G.aYUHeRo.AwfR7MUUG'",
                  "event_flow_id": null
                }
              },
              {
                "type": "INSERT",
                "table": "ds_client",
                "keyValues": {
                  "id": 29,
                  "created_date": "NOW()",
                  "name": "'Nikshay'",
                  "password": "'$2a$10$YjhC9lurGk1mEMUjXk4XBO59kMAfxppvwmoD6p3EUDN5uGu0xr5L.'",
                  "event_flow_id": null
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "version": 401,
    "name": "master_values",
    "sections": [
      {
        "title": "migrations",
        "subSections": [
          {
            "title": "",
            "queries": [
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 1,
                  "version": "'1.1'",
                  "description": "'create schema client'",
                  "type": "'SQL'",
                  "script": "'V1.1__create_schema_client.sql'",
                  "checksum": 1509921934,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.122645'",
                  "execution_time": 12,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 2,
                  "version": "'1.2'",
                  "description": "'create schema dispensation'",
                  "type": "'SQL'",
                  "script": "'V1.2__create_schema_dispensation.sql'",
                  "checksum": -114579741,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.150268'",
                  "execution_time": 10,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 3,
                  "version": "'1.3'",
                  "description": "'create schema product'",
                  "type": "'SQL'",
                  "script": "'V1.3__create_schema_product.sql'",
                  "checksum": -57986548,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.170592'",
                  "execution_time": 9,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 4,
                  "version": "'1.4'",
                  "description": "'create schema product dispensation mapping'",
                  "type": "'SQL'",
                  "script": "'V1.4__create_schema_product_dispensation_mapping.sql'",
                  "checksum": -295631328,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.190366'",
                  "execution_time": 7,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 5,
                  "version": "'1.5'",
                  "description": "'create index clientName on schema client'",
                  "type": "'SQL'",
                  "script": "'V1.5__create_index_clientName_on_schema_client.sql'",
                  "checksum": -778363795,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.206036'",
                  "execution_time": 6,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 6,
                  "version": "'1.6'",
                  "description": "'create index entityId clientId deleted on schema dispensation'",
                  "type": "'SQL'",
                  "script": "'V1.6__create_index_entityId_clientId_deleted_on_schema_dispensation.sql'",
                  "checksum": -717896117,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.220894'",
                  "execution_time": 7,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 7,
                  "version": "'1.7'",
                  "description": "'create index id clientId deleted on schema dispensation'",
                  "type": "'SQL'",
                  "script": "'V1.7__create_index_id_clientId_deleted_on_schema_dispensation.sql'",
                  "checksum": -514290183,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.235427'",
                  "execution_time": 6,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 8,
                  "version": "'1.8'",
                  "description": "'create index dispensationId on schema product dispensation mapping'",
                  "type": "'SQL'",
                  "script": "'V1.8__create_index_dispensationId_on_schema_product_dispensation_mapping.sql'",
                  "checksum": 1041655134,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.248179'",
                  "execution_time": 5,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 9,
                  "version": "'3.0'",
                  "description": "'alter schema dispensation add column dosingstartdate'",
                  "type": "'SQL'",
                  "script": "'V3.0__alter_schema_dispensation_add_column_dosingstartdate.sql'",
                  "checksum": -1057895218,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.260157'",
                  "execution_time": 2,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 10,
                  "version": "'4.0'",
                  "description": "'create schema and index dispensation log'",
                  "type": "'SQL'",
                  "script": "'V4.0__create_schema_and_index_dispensation_log.sql'",
                  "checksum": -677246904,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.269415'",
                  "execution_time": 6,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 11,
                  "version": "'4.1'",
                  "description": "'alter schema dispensation add status'",
                  "type": "'SQL'",
                  "script": "'V4.1__alter_schema_dispensation_add_status.sql'",
                  "checksum": -492990133,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.282337'",
                  "execution_time": 3,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 12,
                  "version": "'5.1'",
                  "description": "'add cloumn event flow id in ds client'",
                  "type": "'SQL'",
                  "script": "'V5.1__add_cloumn_event_flow_id_in_ds_client.sql'",
                  "checksum": -1510900,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.292833'",
                  "execution_time": 3,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 13,
                  "version": "'6.1'",
                  "description": "'create schema product inventory'",
                  "type": "'SQL'",
                  "script": "'V6.1__create_schema_product_inventory.sql'",
                  "checksum": -1585815191,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.305289'",
                  "execution_time": 7,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 14,
                  "version": "'6.2'",
                  "description": "'create schema product inventory hierarchy mapping'",
                  "type": "'SQL'",
                  "script": "'V6.2__create_schema_product_inventory_hierarchy_mapping.sql'",
                  "checksum": 861286309,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.322620'",
                  "execution_time": 8,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 15,
                  "version": "'6.3'",
                  "description": "'update schema product dispensation log'",
                  "type": "'SQL'",
                  "script": "'V6.3__update_schema_product_dispensation_log.sql'",
                  "checksum": 1089887714,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.340872'",
                  "execution_time": 17,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 16,
                  "version": "'6.4'",
                  "description": "'update product id on schema product inventory log'",
                  "type": "'SQL'",
                  "script": "'V6.4__update_product_id_on_schema_product_inventory_log.sql'",
                  "checksum": -608084631,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.365087'",
                  "execution_time": 5,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 17,
                  "version": "'6.5'",
                  "description": "'update transaction id type on schema product inventory log'",
                  "type": "'SQL'",
                  "script": "'V6.5__update_transaction_id_type_on_schema_product_inventory_log.sql'",
                  "checksum": -715917516,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.377159'",
                  "execution_time": 3,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 18,
                  "version": "'6.6'",
                  "description": "'create index product id batch number on schema inventory'",
                  "type": "'SQL'",
                  "script": "'V6.6__create_index_product_id_batch_number_on_schema_inventory.sql'",
                  "checksum": -869782176,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.386132'",
                  "execution_time": 5,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 19,
                  "version": "'6.7'",
                  "description": "'create index drug code on schema product'",
                  "type": "'SQL'",
                  "script": "'V6.7__create_index_drug_code_on_schema_product.sql'",
                  "checksum": -2146220639,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.398576'",
                  "execution_time": 5,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 20,
                  "version": "'6.8'",
                  "description": "'create index product id on schema inventory'",
                  "type": "'SQL'",
                  "script": "'V6.8__create_index_product_id_on_schema_inventory.sql'",
                  "checksum": -328814486,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.411133'",
                  "execution_time": 5,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 21,
                  "version": "'6.9'",
                  "description": "'create index inventory id hierarchy id on schema product inventory hierarchy'",
                  "type": "'SQL'",
                  "script": "'V6.9__create_index_inventory_id_hierarchy_id_on_schema_product_inventory_hierarchy.sql'",
                  "checksum": 27036071,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.422913'",
                  "execution_time": 5,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 22,
                  "version": "'6.10'",
                  "description": "'create index all columns on schema product'",
                  "type": "'SQL'",
                  "script": "'V6.10__create_index_all_columns_on_schema_product.sql'",
                  "checksum": 1156499193,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.434789'",
                  "execution_time": 6,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 23,
                  "version": "'6.11'",
                  "description": "'create index inventory id hierarchy id client id on schema product inventory hierarchy'",
                  "type": "'SQL'",
                  "script": "'V6.11__create_index_inventory_id_hierarchy_id_client_id_on_schema_product_inventory_hierarchy.sql'",
                  "checksum": 1622176103,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.448170'",
                  "execution_time": 5,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 24,
                  "version": "'6.12'",
                  "description": "'create index transaction id on schema product inventory log'",
                  "type": "'SQL'",
                  "script": "'V6.12__create_index_transaction_id_on_schema_product_inventory_log.sql'",
                  "checksum": -1041431493,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.459123'",
                  "execution_time": 5,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 25,
                  "version": "'6.13'",
                  "description": "'change UOM'",
                  "type": "'SQL'",
                  "script": "'V6.13__change_UOM.sql'",
                  "checksum": 2120354059,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.469328'",
                  "execution_time": 3,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 26,
                  "version": "'6.14'",
                  "description": "'add column category in ds product'",
                  "type": "'SQL'",
                  "script": "'V6.14__add_column_category_in_ds_product.sql'",
                  "checksum": -1744097220,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.478698'",
                  "execution_time": 4,
                  "success": true
                }
              },
              {
                "type": "INSERT",
                "table": "flyway_schema_history",
                "keyValues": {
                  "installed_rank": 27,
                  "version": "'6.15'",
                  "description": "'create index hierarchy mapping id on product inventory hierarchy mapping'",
                  "type": "'SQL'",
                  "script": "'V6.15__create_index_hierarchy_mapping_id_on_product_inventory_hierarchy_mapping.sql'",
                  "checksum": 1270626009,
                  "installed_by": "'shreyas'",
                  "installed_on": "'2023-12-11 11:53:23.488586'",
                  "execution_time": 5,
                  "success": true
                }
              }
            ]
          }
        ]
      }
    ]
  }
]